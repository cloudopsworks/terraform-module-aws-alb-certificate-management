<!-- 
  ** DO NOT EDIT THIS FILE
  ** 
  ** This file was automatically generated. 
  ** 1) Make all changes to `README.yaml` 
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file. 
  -->
[![README Header][readme_header_img]][readme_header_link]

[![cloudopsworks][logo]](https://cloudops.works/)

# AWS ALB Certificate Management Terraform Module




This Terraform module automates the management of SSL/TLS certificates for AWS Application Load Balancers (ALB). It streamlines the process of certificate creation, DNS validation via Route53, and seamless attachment to ALB listeners, supporting both simple and complex multi-domain configurations.


---

This project is part of our comprehensive approach towards DevOps Acceleration. 
[<img align="right" title="Share via Email" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/ios-mail.svg"/>][share_email]
[<img align="right" title="Share on Google+" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-googleplus.svg" />][share_googleplus]
[<img align="right" title="Share on Facebook" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-facebook.svg" />][share_facebook]
[<img align="right" title="Share on Reddit" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-reddit.svg" />][share_reddit]
[<img align="right" title="Share on LinkedIn" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-linkedin.svg" />][share_linkedin]
[<img align="right" title="Share on Twitter" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-twitter.svg" />][share_twitter]


[![Terraform Open Source Modules](https://docs.cloudops.works/images/terraform-open-source-modules.svg)][terraform_modules]



It's 100% Open Source and licensed under the [APACHE2](LICENSE).







We have [*lots of terraform modules*][terraform_modules] that are Open Source and we are trying to get them well-maintained!. Check them out!






## Introduction

Ensuring secure communication is critical for modern web applications. This module provides a robust and flexible way to handle AWS Certificate Manager (ACM) certificates. Key features include:
- **Automated ACM Lifecycle**: Handles creation and validation of certificates.
- **Route53 Integration**: Supports automatic DNS validation record creation.
- **ALB Attachment**: Automatically associates certificates with specified ALB listeners.
- **Multi-Domain Support**: Easily configure Subject Alternative Names (SANs).
- **Cross-Account Support**: Ability to manage certificates across different AWS accounts.
- **Flexible Configuration**: Define certificates using a clean YAML-based structure.

## Usage


**IMPORTANT:** The `master` branch is used in `source` just as an example. In your code, do not pin to `master` because there may be breaking changes between releases.
Instead pin to the release tag (e.g. `?ref=vX.Y.Z`) of one of our [latest releases](https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management/releases).


### Terragrunt Implementation
To use this module with Terragrunt, define your configuration in the `inputs` block. This module is designed to work seamlessly with YAML-like structures within Terragrunt/HCL.

#### Core Variables Table
| Name | Description | Required | Default |
|------|-------------|:--------:|---------|
| `org` | Organization and environment details | Yes | N/A |
| `certificates` | Map of certificate configurations | Yes | `{}` |
| `dns_zone_domain` | DNS zone domain for Route53 validation | No | `""` |
| `lb_arn` | ARN of the target Load Balancer | No | `""` |

#### Full Variables Structure (YAML Format)
The following represents the complete structure for all available variables:

```yaml
# Organization settings
org:
  organization_name: "example" # (Required) Organization name
  organization_unit: "devops"  # (Required) Organizational unit
  environment_type: "production" # (Required) Environment type (e.g., prod, dev)
  environment_name: "prod"      # (Required) Specific environment name

# DNS Configuration
dns_zone_domain: "example.com" # (Optional) DNS zone domain. Default: ""
dns_zone_id: "Z1234567890"    # (Optional) DNS zone ID. Default: ""
private_dns_zone: false        # (Optional) Is the DNS zone private? Default: false
external_dns_zone: false       # (Optional) Is the DNS zone external? Default: false

# Load Balancer Integration
lb_arn: "arn:aws:..."                      # (Optional) ALB ARN. Default: ""
load_balancer_listener_arn: "arn:aws:..."  # (Optional) Specific listener ARN. Default: ""
load_balancer_listener_port: 443           # (Optional) Default listener port. Default: -1

# Certificate Definitions
certificates:
  main-cert:                    # (Required) Unique identifier for the certificate
    domain_name: "example.com"  # (Required) Primary domain name
    subject_alternative_names:  # (Optional) List of SANs. Default: []
      - "www.example.com"
    validation_method: "DNS"    # (Optional) DNS or EMAIL. Default: DNS
    validation_domain: "example.com" # (Optional) Domain for validation. Default: ""
    key_algorithm: "RSA_2048"   # (Optional) RSA_2048 or ECDSA_P256. Default: RSA_2048
    validation_option:          # (Optional) List of validation options for different domains. Default: []
      - domain_name: "example.com"
        validation_domain: "example.com" # (Optional) domain for validation, defaults to domain_name
    listener_port: 443          # (Optional) Port override for this cert. Default: load_balancer_listener_port
    listener_arn: "arn:aws:..." # (Optional) Specific listener ARN. Default: ""
    tags:                       # (Optional) Certificate specific tags. Default: {}
      Environment: "production"
    options:                    # (Optional) ACM options
      certificate_transparency_logging_preference: true # (Optional) Default: true

# Advanced Settings
is_hub: false        # (Optional) Is this a hub configuration? Default: false
spoke_def: "001"     # (Optional) Spoke ID (3-digit). Default: "001"
cross_account: false # (Optional) Cross-account validation. Default: false
extra_tags: {}       # (Optional) Additional tags for all resources. Default: {}
```

## Quick Start

1. **Prepare Terragrunt**: Create a `terragrunt.hcl` in your environment directory.
2. **Configure Inputs**: Set your `org` details and define your `certificates` map.
3. **Verify AWS Access**: Ensure your environment has the necessary permissions to manage ACM and Route53.
4. **Execute**:
   ```bash
   terragrunt init
   terragrunt plan
   terragrunt apply
   ```


## Examples

### Standard Terragrunt Configuration
Example of a `terragrunt.hcl` using this module for a production environment:

```hcl
terraform {
  source = "git::https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management.git?ref=v1.0.0"
}

inputs = {
  org = {
    organization_name = "cloudopsworks"
    organization_unit = "platform"
    environment_type  = "prod"
    environment_name  = "main"
  }

  dns_zone_domain = "cloudops.works"
  lb_arn          = "arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/prod-alb/abc123def456"

  certificates = {
    "app-prod" = {
      domain_name               = "app.cloudops.works"
      subject_alternative_names = ["*.app.cloudops.works"]
      validation_method         = "DNS"
      listener_port             = 443
    }
  }
}
```



## Makefile Targets
```
Available targets:

  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  init/aws                            Initialize the project for a specific cloud provider: AWS
  init/azurerm                        Initialize the project for a specific cloud provider: Azure RM
  init/gcp                            Initialize the project for a specific cloud provider: GCP
  lint                                Lint terraform/opentofu code
  tag                                 Tag the current version

```
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | ~> 6.4 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | ~> 6.4 |
| <a name="provider_aws.cross_account"></a> [aws.cross\_account](#provider\_aws.cross\_account) | ~> 6.4 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_tags"></a> [tags](#module\_tags) | cloudopsworks/tags/local | 1.0.9 |

## Resources

| Name | Type |
|------|------|
| [aws_acm_certificate.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate) | resource |
| [aws_acm_certificate_validation.cross](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate_validation) | resource |
| [aws_acm_certificate_validation.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate_validation) | resource |
| [aws_lb_listener_certificate.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener_certificate) | resource |
| [aws_route53_record.cross_validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_route53_record.validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_lb.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/lb) | data source |
| [aws_lb_listener.listener](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/lb_listener) | data source |
| [aws_lb_listener.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/lb_listener) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |
| [aws_route53_zone.cert_zone](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/route53_zone) | data source |
| [aws_route53_zone.cross_zone](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/route53_zone) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_certificates"></a> [certificates](#input\_certificates) | The certificates to create. | `any` | `{}` | no |
| <a name="input_cross_account"></a> [cross\_account](#input\_cross\_account) | The cross account to use for the Certificate domain, aws.cross\_account provider must be set to module. | `bool` | `false` | no |
| <a name="input_dns_zone_domain"></a> [dns\_zone\_domain](#input\_dns\_zone\_domain) | The DNS zone domain, used if zone\_id is not provided. | `string` | `""` | no |
| <a name="input_dns_zone_id"></a> [dns\_zone\_id](#input\_dns\_zone\_id) | The DNS zone to use for the DNS records, must be provided if dns\_zone\_domain is not provided. | `string` | `""` | no |
| <a name="input_external_dns_zone"></a> [external\_dns\_zone](#input\_external\_dns\_zone) | If true, the DNS zone is external and assumed no local Route53 validation required. | `bool` | `false` | no |
| <a name="input_extra_tags"></a> [extra\_tags](#input\_extra\_tags) | Extra tags to add to the resources | `map(string)` | `{}` | no |
| <a name="input_is_hub"></a> [is\_hub](#input\_is\_hub) | Is this a hub or spoke configuration? | `bool` | `false` | no |
| <a name="input_lb_arn"></a> [lb\_arn](#input\_lb\_arn) | The ARN of the load balancer to associate with the certificates. | `string` | `""` | no |
| <a name="input_load_balancer_listener_arn"></a> [load\_balancer\_listener\_arn](#input\_load\_balancer\_listener\_arn) | The ARN of the load balancer to associate with the certificates. | `string` | `""` | no |
| <a name="input_load_balancer_listener_port"></a> [load\_balancer\_listener\_port](#input\_load\_balancer\_listener\_port) | The port of the load balancer to associate with the certificates. | `number` | `-1` | no |
| <a name="input_org"></a> [org](#input\_org) | Organization details | <pre>object({<br/>    organization_name = string<br/>    organization_unit = string<br/>    environment_type  = string<br/>    environment_name  = string<br/>  })</pre> | n/a | yes |
| <a name="input_private_dns_zone"></a> [private\_dns\_zone](#input\_private\_dns\_zone) | If true, the DNS zone to search is private. | `bool` | `false` | no |
| <a name="input_spoke_def"></a> [spoke\_def](#input\_spoke\_def) | Spoke ID Number, must be a 3 digit number | `string` | `"001"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_certificates"></a> [certificates](#output\_certificates) | n/a |
| <a name="output_listener_certificates"></a> [listener\_certificates](#output\_listener\_certificates) | n/a |



## Help

**Got a question?** We got answers. 

File a GitHub [issue](https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management/issues), send us an [email][email] or join our [Slack Community][slack].

[![README Commercial Support][readme_commercial_support_img]][readme_commercial_support_link]

## DevOps Tools

## Slack Community


## Newsletter

## Office Hours

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management/issues) to report any bugs or file feature requests.

### Developing




## Copyrights

Copyright Â© 2024-2026 [Cloud Ops Works LLC](https://cloudops.works)





## License 

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0) 

See [LICENSE](LICENSE) for full details.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.









## Trademarks

All other trademarks referenced herein are the property of their respective owners.

## About

This project is maintained by [Cloud Ops Works LLC][website]. 


### Contributors

|  [![Cristian Beraha][berahac_avatar]][berahac_homepage]<br/>[Cristian Beraha][berahac_homepage] |
|---|

  [berahac_homepage]: https://github.com/berahac
  [berahac_avatar]: https://github.com/berahac.png?size=50

[![README Footer][readme_footer_img]][readme_footer_link]
[![Beacon][beacon]][website]

  [logo]: https://cloudops.works/logo-300x69.svg
  [docs]: https://cowk.io/docs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=docs
  [website]: https://cowk.io/homepage?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=website
  [github]: https://cowk.io/github?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=github
  [jobs]: https://cowk.io/jobs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=jobs
  [hire]: https://cowk.io/hire?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=hire
  [slack]: https://cowk.io/slack?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=slack
  [linkedin]: https://cowk.io/linkedin?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=linkedin
  [twitter]: https://cowk.io/twitter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=twitter
  [testimonial]: https://cowk.io/leave-testimonial?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=testimonial
  [office_hours]: https://cloudops.works/office-hours?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=office_hours
  [newsletter]: https://cowk.io/newsletter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=newsletter
  [email]: https://cowk.io/email?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=email
  [commercial_support]: https://cowk.io/commercial-support?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=commercial_support
  [we_love_open_source]: https://cowk.io/we-love-open-source?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=we_love_open_source
  [terraform_modules]: https://cowk.io/terraform-modules?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=terraform_modules
  [readme_header_img]: https://cloudops.works/readme/header/img
  [readme_header_link]: https://cloudops.works/readme/header/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=readme_header_link
  [readme_footer_img]: https://cloudops.works/readme/footer/img
  [readme_footer_link]: https://cloudops.works/readme/footer/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=readme_footer_link
  [readme_commercial_support_img]: https://cloudops.works/readme/commercial-support/img
  [readme_commercial_support_link]: https://cloudops.works/readme/commercial-support/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-alb-certificate-management&utm_content=readme_commercial_support_link
  [share_twitter]: https://twitter.com/intent/tweet/?text=AWS+ALB+Certificate+Management+Terraform+Module&url=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [share_linkedin]: https://www.linkedin.com/shareArticle?mini=true&title=AWS+ALB+Certificate+Management+Terraform+Module&url=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [share_reddit]: https://reddit.com/submit/?url=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [share_facebook]: https://facebook.com/sharer/sharer.php?u=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [share_googleplus]: https://plus.google.com/share?url=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [share_email]: mailto:?subject=AWS+ALB+Certificate+Management+Terraform+Module&body=https://github.com/cloudopsworks/terraform-module-aws-alb-certificate-management
  [beacon]: https://ga-beacon.cloudops.works/G-7XWMFVFXZT/cloudopsworks/terraform-module-aws-alb-certificate-management?pixel&cs=github&cm=readme&an=terraform-module-aws-alb-certificate-management
